service: Restaurant

plugins:
  - serverless-offline

provider:
  name: aws
  versionFunctions: false
  runtime: nodejs14.x
  region: us-east-1
  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamodb:DescribeTable
        - dynamodb:Query
        - dynamodb:Scan
        - dynamodb:GetItem
        - dynamodb:PutItem
        - dynamodb:UpdateItem
        - dynamodb:DeleteItem
      Resource: arn:aws:dynamodb:us-east-1:*:*

resources:
  Resources:
    restaurantUserTable:
      Type: AWS::DynamoDB::Table
      DeletionPolicy: Retain
      Properties: 
        AttributeDefinitions: 
          - 
            AttributeName: id
            AttributeType: S
          # attribute를 하나 추가함으로써 sort key로 지정
          # -
          #   AttributeName: job
          #   AttributeType: S

        KeySchema:
          - 
            AttributeName: id
            KeyType: HASH
          # sort key 설정 
          # -
          #   AttributeName: job
          #   KeyType: RANGE
        ProvisionedThroughput:
          ReadCapacityUnits: 5
          WriteCapacityUnits: 5
        TableName: "restaurant-user"